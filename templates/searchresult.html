<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Results</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
        searchTerm = {{ searchTerm|tojson }}
        searchResults = {{ searchResults|tojson }}

         window.onload = function() {
             document.getElementById("searchedby").innerHTML = "Search results for '"+searchTerm+"'";
             load();
         };

        function load()
        {
            var i=0;
            for(i=0;i<searchResults.length;i++)
            {
                if(searchResults[i].type=="prof")
                {
                    var prof = searchResults[i];
                    var name = prof.name;
                    var designation = prof.designation;
                    var mail = prof.mail;
                    var contact = prof.contactnumber;
                    var temp = "Research Areas: ";
                    var research = temp+prof.research;
                    var result = (i+1)+". Type: Instructor\nName: "+name+"\nDesignation: "+designation+"\nMail Address: "+mail+"\nContact Number: "+contact+"\n"+research+"\n\n"
                    document.getElementById("results").appendChild(document.createTextNode(result));
                }
                else
                {
                    var work = searchResults[i];
                    var title = work.title;
                    var authors = work.authors;
                    var year = work.year;
                    var abstract = work.abstract;
                    var result = (i+1)+". Type: Work\nTitle: "+title+"\nAuthors: "+authors+"\nYear: "+year+"\nAbstract:\n"+abstract+"\n\n"
                    document.getElementById("results").appendChild(document.createTextNode(result));
                }
            }
        }

        function search()
        {
            var query="";
            if(document.getElementById("searchbar").value=="")alert("Please enter text before searching.");
            else
            {
                query = document.getElementById("searchbar").value;
                searchQuery = {"search": query};
                var temp = JSON.stringify(searchQuery);
                $.post("/searchHandler", temp, function(){});
                window.location="/search";
            }
        }

    </script>
</head>
<body>
    <div style="background: lightgrey; position: fixed; top: 18%; left: 3%; width: 94%; height: 77%; overflow: auto; box-shadow: 0 0 5px 2px #161651">
        <p id="searchedby" style="font-family: sans-serif; font-size: 200%; text-align: center; top: 0.5%"></p>
        <div id="results" style="white-space: pre-line; position: absolute; top: 20%; left: 3%; font-family: sans-serif; font-size: 100%;"></div>
    </div>

    <div style="position: fixed; top: 0%; left: 0%; width: 100%; height: 12%; background: #161651;">
        <a href="http://www.cse.du.ac.bd/"><img alt="Department of Computer Science and Engineering, University of Dhaka" src="/static/Images/csedulogo.png" height="60" width="60" style="position:fixed; top: 0.5%; left: 0.5%"></a>
        <a href="http://www.cse.du.ac.bd/" style="position: fixed; font-family: sans-serif; font-size: 160%; color: white; text-decoration: none; left: 6.5%; top: 1.5%">CSEDU</a>
        <a href="http://www.cse.du.ac.bd/" style="position: fixed; font-family: sans-serif; font-size: 160%; color: white; text-decoration: none; left: 5%; top: 6%">Project Hub</a>
        <input id="searchbar" type="text" style="position: fixed; top: 3%; right: 5%; height: 5%; width: 25%; border-radius: 2px; border: 2px solid black; font-family: Ubuntu; font-size: 105%" placeholder=" Search...">
        <button style="background: transparent; border-color: transparent; position: absolute; top: 27%; right: 5%" onclick=search()><img src="/static/Images/search.png" height="30" width="30"></button>
        <a href=""><img src="/static/Images/profile.png" style="position: fixed; top: 1.75%; right: 0.75%;" width="50" height="50"></a>
    </div>

</body>
</html>